<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project documentation for CWatM implementation in SpineToolbox"><meta name=author content="VTT DOES Team"><link href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/navigating/ rel=canonical><link href=../getting_started/ rel=prev><link href=../Tutorial/ rel=next><link rel=icon href=../images/flex_cwatm_logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.44"><title>Navigating the workflow - FlexTool - CWatM</title><link rel=stylesheet href=../assets/stylesheets/main.0253249f.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#navigating-the-workflow class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/ title="FlexTool - CWatM" class="md-header__button md-logo" aria-label="FlexTool - CWatM" data-md-component=logo> <img src=../images/flex_cwatm_logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FlexTool - CWatM </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Navigating the workflow </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jeanlouisnico/CWatM-spinetoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> jeanlouisnico/CWatM-spinetoolbox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://jeanlouisnico.github.io/CWatM-spinetoolbox/ title="FlexTool - CWatM" class="md-nav__button md-logo" aria-label="FlexTool - CWatM" data-md-component=logo> <img src=../images/flex_cwatm_logo.png alt=logo> </a> FlexTool - CWatM </label> <div class=md-nav__source> <a href=https://github.com/jeanlouisnico/CWatM-spinetoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> jeanlouisnico/CWatM-spinetoolbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> About us </span> </a> </li> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Getting started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Navigating the workflow </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Navigating the workflow </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-import-of-the-calibration-ini-file-into-the-database class=md-nav__link> <span class=md-ellipsis> 1. Import of the calibration .ini file into the database </span> </a> </li> <li class=md-nav__item> <a href=#2-resetting-the-database class=md-nav__link> <span class=md-ellipsis> 2. Resetting the database </span> </a> </li> <li class=md-nav__item> <a href=#3-import-cwatm-ini-files class=md-nav__link> <span class=md-ellipsis> 3. Import CWatM .ini files </span> </a> </li> <li class=md-nav__item> <a href=#4-the-spine-database class=md-nav__link> <span class=md-ellipsis> 4. The Spine Database </span> </a> </li> <li class=md-nav__item> <a href=#5-run-your-calibration class=md-nav__link> <span class=md-ellipsis> 5. Run your calibration </span> </a> </li> <li class=md-nav__item> <a href=#6-run-cwatm-as-a-standalone-process class=md-nav__link> <span class=md-ellipsis> 6. Run CwatM as a standalone process </span> </a> </li> <li class=md-nav__item> <a href=#7-model-coupling-cwatm-irena-flextool class=md-nav__link> <span class=md-ellipsis> 7. Model coupling CWatM + IRENA FlexTool </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Tutorial/ class=md-nav__link> <span class=md-ellipsis> Running standalone version </span> </a> </li> <li class=md-nav__item> <a href=../setting_calibration/ class=md-nav__link> <span class=md-ellipsis> Setup for calibration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../example_models/ class=md-nav__link> <span class=md-ellipsis> Coupling </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-import-of-the-calibration-ini-file-into-the-database class=md-nav__link> <span class=md-ellipsis> 1. Import of the calibration .ini file into the database </span> </a> </li> <li class=md-nav__item> <a href=#2-resetting-the-database class=md-nav__link> <span class=md-ellipsis> 2. Resetting the database </span> </a> </li> <li class=md-nav__item> <a href=#3-import-cwatm-ini-files class=md-nav__link> <span class=md-ellipsis> 3. Import CWatM .ini files </span> </a> </li> <li class=md-nav__item> <a href=#4-the-spine-database class=md-nav__link> <span class=md-ellipsis> 4. The Spine Database </span> </a> </li> <li class=md-nav__item> <a href=#5-run-your-calibration class=md-nav__link> <span class=md-ellipsis> 5. Run your calibration </span> </a> </li> <li class=md-nav__item> <a href=#6-run-cwatm-as-a-standalone-process class=md-nav__link> <span class=md-ellipsis> 6. Run CwatM as a standalone process </span> </a> </li> <li class=md-nav__item> <a href=#7-model-coupling-cwatm-irena-flextool class=md-nav__link> <span class=md-ellipsis> 7. Model coupling CWatM + IRENA FlexTool </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <div><h1 id=navigating-the-workflow>Navigating the workflow<a class=headerlink href=#navigating-the-workflow title="Permanent link">¶</a></h1> <h2 id=1-import-of-the-calibration-ini-file-into-the-database>1. Import of the calibration .ini file into the database<a class=headerlink href=#1-import-of-the-calibration-ini-file-into-the-database title="Permanent link">¶</a></h2> <p><img alt=wf1 src=../images/workflow_1.svg></p> <p>The calibration init file is the typical CWatM ini file that is given in the tutorials. You can re-link the file depending on where you have installed your CWatM copy. The purpose of this process is to populate the ini file entities, parameters, and parameter values into the spine DB interface. All parameters can further be modified once imported into the database. If the calibration init file is modified, a warning -<img alt=❗ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2757.svg title=:exclamation:>- will be displayed on the first tool meaning that the file needs to be relinked. In this case, just drag and drop the file from the <em>Available resources</em> to the <em>Tool arguments</em>. The first tool converts the init file into a valid toml file that is standardised and can easily be imported into the <em>SpineDatabase</em>.</p> <p><img alt=wf1 src=../images/relink_ini_file.png></p> <p>The parsing of the formatted toml file is then done and nothing should be changed unless the user changes the name of the SpineDB database in the workflow, in which case the input data needs to be re-linked as well as previously shown.</p> <h2 id=2-resetting-the-database>2. Resetting the database<a class=headerlink href=#2-resetting-the-database title="Permanent link">¶</a></h2> <p><img alt=wf2 src=../images/workflow_2.svg></p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This second section is to be used cautiously. This resets the database by deleting all its components except the <em>Base</em> alternative. The entities inside the <em>Base</em> alternative are removed and only the <em>Base</em> alternative remains empty. </p> </div> <p><img alt=reset_DB src=../images/reset_DB.png></p> <p>By default, the second argument is set to <strong><em>false</em></strong>, which does not reset the Spine Database and just bypasses the whole tool. In case one would like to reset the entire database, set the second argument to <strong><em>true</em></strong> and the entire Spine Database will be reset.</p> <h2 id=3-import-cwatm-ini-files>3. Import CWatM .ini files<a class=headerlink href=#3-import-cwatm-ini-files title="Permanent link">¶</a></h2> <p><img alt=wf3 src=../images/workflow_3.svg></p> <p>The third section Imports your working CWatM <em>ini</em> file. In essence, you would not need both connectors but for the sake of clarity, two <em>data connectors</em> are placed in the workflow. The first <em>data connector</em> defines the basic format of CWatM using the <em><u>setting_CWatM_template_30min.ini</u></em> file distributed by CWatM. The second <em>data connector</em> is used to populate any <em>.ini file that is generated by the user. In both cases, ensure that the paths to the ini files are correct in the *Data Connection Properties</em> window. </p> <div class="admonition attention"> <p class=admonition-title>Attention</p> <p>In the first tool, the original <em>ini</em> file is being converted into a valid <em>toml</em> file. Ensure that the file you want to use is the one you want to import in the Spine Database. </p> </div> <h2 id=4-the-spine-database>4. The Spine Database<a class=headerlink href=#4-the-spine-database title="Permanent link">¶</a></h2> <p>This is the central database, also called the Spine Database, where all the data are stored. <em>Alternative</em> and <em>Scenario</em> can be created manually and if any data needs to be changed, added, or add new main section in the <em>.ini</em> files can be done from the database. When double clicking on database, it will open the Spine Database interface that would look like somewhat similar to what is shown below.</p> <p><img alt=wf4 src=../images/entity_param.png></p> <p>The <em>Entities</em> are shown on the left-hand side of the table. By selecting the <em>entity</em>, only the parameters from the selected entity will be displayed</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Pay special attention to the <em>FILE_PATHS</em> entity as this is the one that will vary between the different alternative e.g. meteo files for the 30-arcmin or 5-arcmin spatial resolution</p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>When importing a new CWatM <em>ini</em> file into the database, the workflow does not compare existing values with the new ones, therefore a lot of parameters may be duplicated compared to the <em>Base</em> alternative. These <em>Parameters</em> can be deleted. It will make the Spine Database easier to read and maintain over time if multiple <em>ini</em> files are imported into the database.</p> </div> <h2 id=5-run-your-calibration>5. Run your calibration<a class=headerlink href=#5-run-your-calibration title="Permanent link">¶</a></h2> <p>Export the database for the calibration and run the calibration. It exports 2 **.ini* files: one for the calibration setup and one for the CWatM model that needs to be calibrated. The arguments from the Tool properties do not need to be updated as they are set for the model. The outputs from the calibration are then exported and setup from the best alternative is imported back into the database under the alternative "best_calib". This section can be run as is. However, by clicking the first arrow, ensure you have created a <em>calibration</em> and a <em>calibration_ini</em> scenario. The first one includes all the parameters from the <em>Base</em> and the <em>calibration</em> alternatives to build a readable <em>ini</em> file by CWatM and run the calibration. The second one only includes the calibration setup required by the calibration tool.</p> <p><img alt=wf5 src=../images/workflow_5.svg></p> <h2 id=6-run-cwatm-as-a-standalone-process>6. Run CwatM as a standalone process<a class=headerlink href=#6-run-cwatm-as-a-standalone-process title="Permanent link">¶</a></h2> <p>Run a regular CWatM flow. This is done from the database and can be run in sequence from the calibration set up. By clicking the yellow arrow before the export tool, one can choose which scenario to run into CWatM.</p> <p><img alt=wf6 src=../images/workflow_6.svg></p> <h2 id=7-model-coupling-cwatm-irena-flextool>7. Model coupling CWatM + IRENA FlexTool<a class=headerlink href=#7-model-coupling-cwatm-irena-flextool title="Permanent link">¶</a></h2> <p>With this section, it is possible to run the CWatM model in junction with IRENA FlexTool. The main workflow here is to be able to set a rolling period where the hydrology model is run and then pass the results to IRENA FlexTool. Extra steps to setup the IRENA FlexTool model are required and are explained in section (Soon to come)</p> <p><img alt=wf7 src=../images/workflow_7.svg></p></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 - 2024 VTT - Design and Operation of Energy Systems </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.83f73b43.min.js></script> </body> </html>